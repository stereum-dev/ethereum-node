---
- name: Run Prysm beacon chain container
  vars:
    chain_id: "32382"
    suggested_fee_recipient: "0x123463a4b065722e99115d6c222f267d9cabb524"
  docker_container:
    name: prysm-beacon-chain
    image: "prysmaticlabs/prysm-beacon-chain"
    networks:
      - name: "DevNet"
    state: started
    restart_policy: always
    volumes:
      - "{{working_dir}}/consensus:/consensus"
      - "{{working_dir}}/execution:/execution"
      - "{{working_dir}}/execution/jwtsecret:/execution/jwtsecret"
    ports:
      - "4000:4000"
      - "3500:3500"
      - "8080:8080"
      - "6060:6060"
      - "9090:9090"
    command:
      - --datadir=/consensus/beacondata
      - --min-sync-peers=0
      - --genesis-state=/consensus/genesis.ssz
      - --bootstrap-node=
      - --interop-eth1data-votes
      - --chain-config-file=/consensus/config.yml
      - --contract-deployment-block=0
      - --chain-id={{ chain_id }}
      - --rpc-host=0.0.0.0
      - --grpc-gateway-host=0.0.0.0
      - --execution-endpoint=http://geth:8551
      - --accept-terms-of-use
      - --jwt-secret=/execution/jwtsecret
      - --suggested-fee-recipient={{ suggested_fee_recipient }}
      - --minimum-peers-per-subnet=0
      - --enable-debug-rpc-endpoints
      - --force-clear-db
