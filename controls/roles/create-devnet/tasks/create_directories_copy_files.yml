---
- name: Check if consensus directory exists
  ansible.builtin.stat:
    path: "{{ working_dir }}/{{ devnet_services.CL }}"
  register: cl_dir_stat

- name: Check if execution directory exists
  ansible.builtin.stat:
    path: "{{ working_dir }}/{{ devnet_services.EL }}"
  register: el_dir_stat

- name: Create consensus and execution directories if they do not exist
  ansible.builtin.file:
    path: "{{ working_dir }}/{{ item.path }}/genesis"
    state: directory
    mode: "0777"
  when: not item.stat.exists
  with_items:
    - { path: "{{ devnet_services.CL }}", stat: "{{ cl_dir_stat.stat }}" }
    - { path: "{{ devnet_services.EL }}", stat: "{{ el_dir_stat.stat }}" }

- name: Check if config.yml exists
  ansible.builtin.stat:
    path: "{{ working_dir }}/{{ devnet_services.CL }}/config.yml"
  register: config_yml_stat

- name: Copy config.yml if it does not exist
  ansible.builtin.copy:
    src: "{{ role_path }}/files/config.yml"
    dest: "{{ working_dir }}/{{ devnet_services.CL }}/config.yml"
    mode: "0777"
  when: not config_yml_stat.stat.exists

- name: Check if genesis.json exists
  ansible.builtin.stat:
    path: "{{ working_dir }}/{{ devnet_services.EL }}/genesis.json"
  register: genesis_json_stat

- name: Copy genesis.json if it does not exist
  ansible.builtin.copy:
    src: "{{ role_path }}/files/genesis.json"
    dest: "{{ working_dir }}/{{ devnet_services.EL }}/genesis.json"
    mode: "0777"
  when: not genesis_json_stat.stat.exists
# EOF
